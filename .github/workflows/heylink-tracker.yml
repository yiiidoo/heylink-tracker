name: Heylink Tracker Cron

on:
  schedule:
    # Her 5 dakikada bir çalıştır
    - cron: '*/5 * * * *'
  workflow_dispatch: # Manuel çalıştırma için

jobs:
  track-heylinks:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Trigger Vercel Function
      run: |
        # Vercel function'ını çağır
        echo "Calling Vercel function..."
        curl -v -X POST "https://heylink-tracker-9ay5v27rs-yiiidos-projects.vercel.app/api/tracker" \
          -H "Content-Type: application/json" \
          --max-time 60 \
          -w "\nStatus: %{http_code}\nTime: %{time_total}s\n"
